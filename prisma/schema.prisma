generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                   String    @id @default(cuid())
  role                 UserRole  @default(EMPLOYEE)
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @updatedAt
  email                String    @unique
  password             String
  passwordResetExpires DateTime?
  passwordResetToken   String?

  @@map("users")
}

model Employee {
  id                   String         @id @default(cuid())
  name                 String
  email                String         @unique
  phoneNumber          String?
  address              String?
  birthDate            DateTime?
  gender               Gender?
  createdAt            DateTime       @default(now())
  updatedAt            DateTime       @updatedAt
  password             String
  passwordResetExpires DateTime?
  passwordResetToken   String?
  role                 UserRole       @default(EMPLOYEE)
  leaveRequests        LeaveRequest[]

  @@map("employees")
}

model LeaveRequest {
  id          String             @id @default(cuid())
  employeeId  String
  startDate   DateTime
  endDate     DateTime
  description String
  status      LeaveRequestStatus @default(PENDING)
  createdAt   DateTime           @default(now())
  updatedAt   DateTime           @updatedAt
  employee    Employee           @relation(fields: [employeeId], references: [id], onDelete: Cascade)

  @@map("leave_requests")
}

enum UserRole {
  ADMIN
  EMPLOYEE
}

enum Gender {
  MALE
  FEMALE
  OTHER
}

enum LeaveRequestStatus {
  PENDING
  APPROVED
  CANCELLED
}
